{% extends 'main/base.html' %}

{% block title %}
{{ title }}
{% endblock %}
{% block knopka %}
{% if user.is_authenticated %}
<a class="p-2 text-dark" style=" text-decoration: none;"><b> Добро пожаловать, {{ user.username }}!</b></a>
<a class="btn btn-outline-primary" href="{% url 'logout' %}">Выйти</a>
{% else %}
<a class="btn btn-outline-primary" href="{% url 'login' %}">Войти</a>
<a class="btn btn-outline-primary" href="{% url 'register' %}">Зарегистрироваться</a>
{% endif %}

{% endblock %}
{% block content %}

{% if user.is_authenticated %}
<a href="{% url 'add_task' %}" class="btn btn-primary">Добавить задачу</a>
{% if tasks %}
{% for task in tasks %}
{% if task.user == user %}
<div class="alert mt-2 {% if not task.isDo %}alert-danger{% else %}alert-success{% endif %}">
    <h3>{{ task.header }}</h3>
    <p>{{ task.dispatcher }}</p>
        {% if task.isDo %}
        <p>Выполнено</p>
        {% else %}
        <p>Не выполнено</p>
        {% endif %}
    <a href="{% url 'edit_task' task.id %}" class="btn {% if not task.isDo %}btn-danger{% else %}btn-success{% endif %}">Редактировать</a>
        <form action="{% url 'delete_task' task.id %}" method="post" style="display: inline;">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger">Удалить</button>
    </form>

</div>
{% endif %}
{% endfor %}

{% endif %}


{% else %}
<h2 style="text_align:center;">Чтобы использовать наш сервис, вам нужно авторизироваться или зарегистрироваться.</h2>
{% endif %}
{% endblock %}
